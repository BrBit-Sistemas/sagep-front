# ğŸ—ï¸ Estrutura de Features CRUD - SAGEP

## ğŸ“ Estrutura de DiretÃ³rios ObrigatÃ³ria

Toda feature CRUD deve seguir esta estrutura exata:

```
src/features/{feature-name}/
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts          # Tipos TypeScript da entidade
â”œâ”€â”€ schemas/
â”‚   â””â”€â”€ index.ts          # Schemas de validaÃ§Ã£o Zod
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ {feature}-cadastro-store.ts  # Store Zustand para estado
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ keys.ts           # React Query keys
â”‚   â”œâ”€â”€ use-{feature}-list.ts        # Hook para listagem
â”‚   â”œâ”€â”€ use-create-{feature}.ts      # Hook para criaÃ§Ã£o
â”‚   â”œâ”€â”€ use-update-{feature}.ts      # Hook para atualizaÃ§Ã£o
â”‚   â”œâ”€â”€ use-delete-{feature}.ts      # Hook para exclusÃ£o
â”‚   â”œâ”€â”€ use-{feature}-list-table.tsx # Hook para configuraÃ§Ã£o da tabela
â”‚   â””â”€â”€ use-{feature}-search-params.ts # Hook para parÃ¢metros de busca
â”œâ”€â”€ components/
â”‚   â””â”€â”€ cadastro/
â”‚       â”œâ”€â”€ {feature}-form-dialog.tsx    # Dialog de formulÃ¡rio
â”‚       â””â”€â”€ {feature}-delete-dialog.tsx  # Dialog de confirmaÃ§Ã£o de exclusÃ£o
â”œâ”€â”€ data/
â”‚   â””â”€â”€ index.ts          # ServiÃ§os de API (mock ou real)
â”œâ”€â”€ helper/
â”‚   â””â”€â”€ index.ts          # FunÃ§Ãµes auxiliares de transformaÃ§Ã£o
â””â”€â”€ pages/
    â””â”€â”€ cadastro.tsx      # PÃ¡gina principal do CRUD
```

## ğŸ¯ ConvenÃ§Ãµes de Nomenclatura

### Arquivos e DiretÃ³rios

- **Features**: nome no singular (ex: `detento`, `unidade`)
- **Stores**: `{feature}-cadastro-store.ts`
- **Hooks**: `use-{action}-{feature}.ts`
- **Components**: `{feature}-{component}-dialog.tsx`
- **Pages**: sempre `cadastro.tsx`

### Identificadores

- **IDs de entidade**: `{feature}_id` (ex: `detento_id`, `unidade_id`)
- **Types**: `{Feature}` (PascalCase, ex: `Detento`, `Unidade`)
- **Schemas**: `create{Feature}Schema`, `update{Feature}Schema`
- **Services**: `{feature}Service` (ex: `detentoService`)

## âš¡ Exemplo de ImplementaÃ§Ã£o

Para criar uma nova feature `unidade`:

```typescript
// src/features/unidade/types/index.ts
export type Unidade = {
  unidade_id: string;
  nome: string;
  // ... outros campos
  created_at: string;
  updated_at: string;
  created_by?: string;
  updated_by?: string;
};

// src/features/unidade/stores/unidade-cadastro-store.ts
export const useUnidadeCadastroStore = create<UnidadeCadastroStore>((set) => ({
  // ... implementaÃ§Ã£o igual ao padrÃ£o
}));
```

## ğŸ”§ Tecnologias ObrigatÃ³rias

- **Estado Global**: Zustand para stores
- **ValidaÃ§Ã£o**: Zod para schemas
- **API**: React Query para cache e mutaÃ§Ãµes
- **FormulÃ¡rios**: React Hook Form + Zod resolver
- **UI**: Material-UI componentes
- **Tabelas**: MUI X Data Grid

## ğŸ“‹ Checklist de Nova Feature

- [ ] Criar estrutura de diretÃ³rios completa
- [ ] Definir tipos em `types/index.ts`
- [ ] Criar schemas de validaÃ§Ã£o em `schemas/index.ts`
- [ ] Implementar store em `stores/{feature}-cadastro-store.ts`
- [ ] Criar todos os hooks necessÃ¡rios em `hooks/`
- [ ] Implementar componentes em `components/cadastro/`
- [ ] Criar serviÃ§o de dados em `data/index.ts`
- [ ] Adicionar helpers em `helper/index.ts`
- [ ] Implementar pÃ¡gina em `pages/cadastro.tsx`
- [ ] Adicionar rota no sistema de rotas
- [ ] Configurar menu se necessÃ¡rio

## âš ï¸ Regras Importantes

1. **NUNCA** misture lÃ³gicas de features diferentes
2. **SEMPRE** use a estrutura de diretÃ³rios exata
3. **SEMPRE** siga as convenÃ§Ãµes de nomenclatura
4. **SEMPRE** implemente todos os hooks CRUD bÃ¡sicos
5. **SEMPRE** use TypeScript com tipagem forte
   description:
   globs:
   alwaysApply: false

---
